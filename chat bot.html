<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chatbot Inclusivo</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f9;
        }
        .chat-button-open {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #007bff; /* Cor azul para o botÃ£o inicial */
            color: white;
            border: none;
            border-radius: 8px;
            padding: 15px 20px;
            cursor: pointer;
            font-size: 16px;
            z-index: 1000; /* Garante que o botÃ£o fique acima do conteÃºdo */
        }
        .chat-button-open:hover {
            background-color: #0056b3;
        }
        .chat-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: white;
            border: 1px solid #ccc;
            border-radius: 8px;
            width: 300px;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
            z-index: 1001; /* Garante que o chat fique acima do botÃ£o */
        }
        .chat-container.hidden {
            display: none;
        }
        .chat-header {
            background-color: #f0f0f0;
            padding: 10px;
            border-bottom: 1px solid #ccc;
            border-top-left-radius: 8px;
            border-top-right-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .chat-header h3 {
            margin: 0;
            font-size: 18px;
        }
        .chat-header button {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            padding: 0;
        }
        .chat-box {
            max-height: 300px; /* Reduzi a altura para caber melhor */
            overflow-y: auto;
            padding: 10px;
            background-color: #f9f9f9;
            border-bottom: 1px solid #ccc;
        }
        .chat-input-area {
            display: flex;
            padding: 10px;
        }
        .chat-input {
            flex-grow: 1;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 8px 0 0 8px;
            box-sizing: border-box;
            border-right: none;
        }
        .chat-submit-button {
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 0 8px 8px 0;
            padding: 10px 15px;
            cursor: pointer;
        }
        .chat-submit-button:hover {
            background-color: #45a049;
        }
        .user-message {
            text-align: right;
            margin: 5px 0;
            padding: 8px;
            background-color: #e0f7fa;
            border-radius: 8px;
            word-break: break-word;
        }
        .bot-message {
            text-align: left;
            margin: 5px 0;
            padding: 8px;
            background-color: #f0f0f0;
            border-radius: 8px;
            word-break: break-word;
        }
    </style>
</head>

<body>
    <button class="chat-button-open" id="open-chat">Abrir Chat</button>
    <div class="chat-container hidden" id="chat-container">
        <div class="chat-header">
            <h3>Chatbot Inclusivo</h3>
            <button onclick="toggleChat()">Ã—</button>
        </div>
        <div class="chat-box" id="chat-box"></div>
        <div class="chat-input-area">
            <button id="start-speech" style="padding: 8px; cursor: pointer;">ðŸŽ¤</button>
            <input type="text" id="user-input" class="chat-input" placeholder="Digite sua mensagem..." onkeydown="if(event.key === 'Enter'){sendMessage();}">
            <button class="chat-submit-button" onclick="sendMessage()">Enviar</button>
        </div>
    </div>

    <script>
        const chatContainer = document.getElementById("chat-container");
        const openChatButton = document.getElementById("open-chat");
        const chatBox = document.getElementById("chat-box");
        const userInputElement = document.getElementById("user-input");
        const startSpeechButton = document.getElementById("start-speech");

        let lastBotMessage = ""; // VariÃ¡vel para rastrear a Ãºltima mensagem do bot
        let recognition;

        const speechUtterance = new SpeechSynthesisUtterance();
        speechUtterance.lang = 'pt-BR';
        speechUtterance.rate = 1;
        speechUtterance.pitch = 1;

        function speak(message) {
            speechUtterance.text = message;
            window.speechSynthesis.speak(speechUtterance);
        }

        function displayBotMessage(message) {
            const chatBox = document.getElementById("chat-box");
            const messageDiv = document.createElement("div");
            messageDiv.classList.add("bot-message");
            messageDiv.innerHTML = message.replace(/\n/g, '<br>');
            chatBox.appendChild(messageDiv);
            chatBox.scrollTop = chatBox.scrollHeight;
            speak(message); // Faz o bot falar a mensagem
        }

        function displayUserMessage(message) {
            const chatBox = document.getElementById("chat-box");
            const messageDiv = document.createElement("div");
            messageDiv.classList.add("user-message");
            messageDiv.innerHTML = message.replace(/\n/g, '<br>');
            chatBox.appendChild(messageDiv);
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        function toggleChat() {
            chatContainer.classList.toggle("hidden");
            openChatButton.style.display = chatContainer.classList.contains("hidden") ? "block" : "none";
            if (!chatContainer.classList.contains("hidden") && chatBox.children.length === 0) {
                const initialMessage = "OlÃ¡! Sou um assistente inclusivo. VocÃª pode me perguntar sobre: capacitaÃ§Ã£o, habilidades sociais, apoio emocional, acessibilidade, empresas inclusivas, direitos das pessoas com deficiÃªncia, tecnologia assistiva ou Libras.";
                displayBotMessage(initialMessage); // Usa displayBotMessage aqui
                lastBotMessage = initialMessage;
            }
        }

        openChatButton.addEventListener("click", toggleChat);

        function getBotResponse(userInput) {
            // Lista de direitos especÃ­ficos
            const direitosEspecificos = ["saÃºde", "educaÃ§Ã£o", "trabalho", "transporte"];

            // Verifica se a Ãºltima mensagem do bot foi sobre direitos especÃ­ficos
            if (
                lastBotMessage &&
                lastBotMessage.includes("Quais direitos das pessoas com deficiÃªncia vocÃª gostaria de conhecer: saÃºde, educaÃ§Ã£o, trabalho, transporte ou outros?")
            ) {
                // Verifica se a resposta do usuÃ¡rio corresponde a um direito especÃ­fico
                for (const direito of direitosEspecificos) {
                    if (userInput.includes(direito)) {
                        return `O direito Ã  ${direito} estÃ¡ previsto na Lei Brasileira de InclusÃ£o (Lei nÂº 13.146/2015).`;
                    }
                }
                if (userInput.toLowerCase().includes("outros")) {
                    return `Outros direitos importantes incluem a acessibilidade, a igualdade de oportunidades, a participaÃ§Ã£o na vida polÃ­tica e pÃºblica, entre outros, todos assegurados pelo Estatuto da Pessoa com DeficiÃªncia.`;
                }
            }

            // Verifica se a Ãºltima mensagem do bot foi sobre exemplos de tecnologia assistiva
            if (
                lastBotMessage &&
                lastBotMessage.includes("Leitores de tela como NVDA, JAWS e VoiceOver sÃ£o exemplos.") &&
                userInput.toLowerCase().includes("sim")
            ) {
                return "Ã“timo! Para leitores de tela, vocÃª pode pesquisar por NVDA (gratuito), JAWS (pago) e VoiceOver (nativo em dispositivos Apple). Existem muitos tutoriais online para comeÃ§ar a usÃ¡-los.";
            }

            // Verifica se a Ãºltima mensagem do bot foi sobre ajudar com acessibilidade (primeira resposta)
            if (
                lastBotMessage &&
                lastBotMessage.includes("Posso te ajudar a verificar se um local ou produto Ã© acessÃ­vel?") &&
                userInput.toLowerCase().includes("sim")
            ) {
                return "Para avaliarmos a acessibilidade, me diga qual local ou produto gostaria de verificar!";
            }
            if (
                lastBotMessage &&
                lastBotMessage.includes("Posso te ajudar a verificar se um local ou produto Ã© acessÃ­vel?") &&
                userInput.toLowerCase().includes("me ajude")
            ) {
                return "Certo, diga qual local ou produto vocÃª quer verificar a acessibilidade.";
            }

            // Verifica se a Ãºltima mensagem do bot pediu um local/produto para verificar a acessibilidade
            if (
                lastBotMessage &&
                lastBotMessage.includes("Para avaliarmos a acessibilidade, me diga qual local ou produto gostaria de verificar!") &&
                userInput.trim() !== ""
            ) {
                const localProduto = userInput.toLowerCase();
                return `Para avaliar a acessibilidade de "${userInput}", observe o seguinte:\n\n` +
                       `**EdificaÃ§Ãµes AcessÃ­veis:**\n` +
                       `- Rampas e elevadores.\n` +
                       `- CorrimÃ£os e banheiros adaptados.\n` +
                       `- SinalizaÃ§Ã£o tÃ¡til e visual.\n` +
                       `- EspaÃ§os de circulaÃ§Ã£o adequados.\n\n` +
                       `**Vias PÃºblicas AcessÃ­veis:**\n` +
                       `- Piso tÃ¡til e faixas de pedestres seguras.\n` +
                       `- SemÃ¡foros sonoros e rebaixamento de guias.\n` +
                       `- MobiliÃ¡rio urbano acessÃ­vel.\n\n` +
                       `**Transporte PÃºblico AcessÃ­vel:**\n` +
                       `- Elevadores ou rampas de acesso em veÃ­culos.\n` +
                       `- EspaÃ§os reservados e sinalizaÃ§Ã£o adequada.\n` +
                       `- EstaÃ§Ãµes e terminais acessÃ­veis.\n\n` +
                       `**Lazer e RecreaÃ§Ã£o AcessÃ­veis:**\n` +
                       `- Caminhos acessÃ­veis em parques.\n` +
                       `- Brinquedos adaptados e Ã¡reas de descanso adequadas.\n` +
                       `- SanitÃ¡rios acessÃ­veis.\n\n` +
                       `**ComÃ©rcio e ServiÃ§os AcessÃ­veis:**\n` +
                       `- Acesso facilitado a lojas, restaurantes, cinemas, etc.\n\n` +
                       `**EducaÃ§Ã£o AcessÃ­vel:**\n` +
                       `- Acessibilidade fÃ­sica nas escolas e universidades.\n` +
                       `- Acessibilidade pedagÃ³gica (materiais e mÃ©todos adaptados).\n\n` +
                       `**SaÃºde AcessÃ­vel:**\n` +
                       `- Acesso facilitado a hospitais e clÃ­nicas.\n` +
                       `- Equipamentos e comunicaÃ§Ã£o acessÃ­veis.`;
            }
            if (
                lastBotMessage &&
                lastBotMessage.includes("Certo, diga qual local ou produto vocÃª quer verificar a acessibilidade.") &&
                userInput.trim() !== ""
            ) {
                return `VocÃª quer verificar a acessibilidade de "${userInput}". Ã‰ importante observar se hÃ¡ rampas, corrimÃ£os, elevadores, informaÃ§Ãµes em braile e outras adaptaÃ§Ãµes para garantir a inclusÃ£o.`;
            }

            // Resposta de confirmaÃ§Ã£o genÃ©rica
            if (userInput.toLowerCase().includes("sim") && lastBotMessage) {
                for (const key in database) {
                    for (const item of database[key]) {
                        if (item.initial && item.initial.toLowerCase() === lastBotMessage.toLowerCase()) {
                            // Verifica se a Ãºltima mensagem foi sobre apoio emocional
                            if (key === "apoio emocional") {
                                // Abre os sites recomendados em novas abas
                                window.open("https://www.psicologiaviva.com.br/", "_blank");
                                return "Abri para vocÃª o site recomendado para apoio emocional. Espero que seja Ãºtil!";
                            }
                            return item.followUp;
                        }
                    }
                }
            }

            // Tenta identificar tema por palavra-chave direta
            for (const key in database) {
                if (userInput.includes(key)) {
                    const respostas = database[key];
                    const respostaAleatoria = respostas[Math.floor(Math.random() * respostas.length)];
                    return respostaAleatoria.initial;
                }
            }

            // Verifica por palavras-chave flexÃ­veis
            for (const tema in palavrasChave) {
                const lista = palavrasChave[tema];
                if (lista.some(palavra => userInput.includes(palavra))) {
                    const respostas = database[tema];
                    const respostaAleatoria = respostas[Math.floor(Math.random() * respostas.length)];
                    return respostaAleatoria.initial;
                }
            }

            // Resposta de despedida para respostas como "Ok", "Obrigado" e similares
            if (
                userInput.includes("ok") ||
                userInput.includes("obrigado") ||
                userInput.includes("obrigada") ||
                userInput.includes("tchau") ||
                userInput.includes("obg")
            ) {
                return "Fico feliz em ter ajudado! Se precisar de mais alguma coisa, Ã© sÃ³ chamar. AtÃ© logo! ðŸ˜Š";
            }

            return "Desculpe, nÃ£o consegui identificar exatamente o que vocÃª perguntou. Por favor, seja mais especÃ­fico.";
        }

        function sendMessage() {
            const userInputElement = document.getElementById("user-input");
            const userInput = userInputElement.value;
            if (userInput.trim() === "") return;

            displayUserMessage(userInput, "user");
            userInputElement.value = "";

            const botResponse = getBotResponse(userInput.toLowerCase());
            displayBotMessage(botResponse, "bot");
            lastBotMessage = botResponse;
        }

        function getLastBotMessage() {
            const chatBox = document.getElementById("chat-box");
            const botMessages = chatBox.querySelectorAll(".bot-message");
            if (botMessages.length > 0) {
                return botMessages[botMessages.length - 1].textContent;
            }
            return "";
        }

        const database = {
            "capacitaÃ§Ã£o": [
                {
                    "initial": "A capacitaÃ§Ã£o profissional Ã© uma das melhores formas de garantir uma inserÃ§Ã£o digna no mercado de trabalho. Embora nÃ£o ofereÃ§amos cursos diretamente, podemos indicar cursos gratuitos em plataformas como Coursera, edX e Udemy. VocÃª gostaria de saber mais sobre algum tema especÃ­fico ou buscar cursos nessas plataformas?",
                    "followUp": "VocÃª pode explorar cursos gratuitos nessas plataformas e tambÃ©m acessar nossa pÃ¡gina de capacitaÃ§Ã£o para conferir dicas, recursos e links Ãºteis para o seu desenvolvimento profissional."
                }
            ],
            "habilidades sociais": [
                {
                    "initial": "As habilidades sociais sÃ£o essenciais para interaÃ§Ãµes eficazes no ambiente profissional e pessoal. Existem muitos recursos disponÃ­veis online para o desenvolvimento dessas habilidades. VocÃª gostaria de mais informaÃ§Ãµes sobre como melhorar suas habilidades de comunicaÃ§Ã£o ou trabalho em equipe?",
                    "followUp": "Recomendo procurar cursos e tutoriais sobre comunicaÃ§Ã£o eficaz, resoluÃ§Ã£o de conflitos e trabalho em equipe."
                }
            ],
            "apoio emocional": [
                {
                    "initial": "O apoio emocional Ã© essencial. Existem grupos de apoio online para pessoas com deficiÃªncia. Quer que eu te ajude a encontrar um?",
                    "followUp": "Algumas plataformas Ãºteis incluem: Psicologia Viva, Zenklub e Vittude e tambÃ©m acesse a nossa pÃ¡gina de apoio emocional para conferir dicas, recursos e links Ãºteis."
                }
            ],
            "acessibilidade": [
                {
                    "initial": "A acessibilidade garante acesso igualitÃ¡rio a espaÃ§os e serviÃ§os. Posso te ajudar a verificar se um local ou produto Ã© acessÃ­vel?",
                    "followUp": "Procure rampas, elevadores, sinalizaÃ§Ã£o em braile, leitores de tela e acessos visuais e tÃ¡teis. Quer ajuda para avaliar um lugar especÃ­fico?"
                }
            ],
            "empresas inclusivas": [
                {
                    "initial": "Empresas inclusivas promovem um ambiente acessÃ­vel e respeitoso. Podemos prosseguir?",
                    "followUp": "Empresas inclusivas integram diversas pessoas em todos os nÃ­veis, indo alÃ©m de cotas. Isso traz inovaÃ§Ã£o, melhora a reputaÃ§Ã£o, atrai talentos, aumenta produtividade, compreende melhor o mercado e reduz conflitos. Construir essa cultura exige comprometimento da lideranÃ§a, polÃ­ticas inclusivas, acessibilidade, treinamento, comunicaÃ§Ã£o aberta e monitoramento constante. Ser inclusivo nÃ£o Ã© sÃ³ Ã©tico, mas torna a empresa mais inovadora, competitiva e socialmente responsÃ¡vel."
                },
                {
                    "initial": "Algumas empresas sÃ£o exemplos de boas prÃ¡ticas em inclusÃ£o e acessibilidade digital. Gostaria de conhecer algumas?",
                    "followUp": "Empresas como Natura, Magazine Luiza e Johnson & Johnson implementam polÃ­ticas de inclusÃ£o e acessibilidade digital."
                }
            ],
            "direitos das pessoas com deficiÃªncia": [
                {
                    "initial": "Quais direitos das pessoas com deficiÃªncia vocÃª gostaria de conhecer: saÃºde, educaÃ§Ã£o, trabalho, transporte ou outros?",
                    "followUp": "No Brasil, a ConstituiÃ§Ã£o Federal e o Estatuto da Pessoa com DeficiÃªncia (Lei nÂº 13.146/2015) asseguram direitos para garantir igualdade e plena participaÃ§Ã£o na sociedade. Os principais direitos incluem acessibilidade (ambientes, serviÃ§os, informaÃ§Ã£o), educaÃ§Ã£o inclusiva com adaptaÃ§Ãµes, saÃºde adequada com tecnologia assistiva, igualdade de oportunidades no trabalho com adaptaÃ§Ãµes, direitos previdenciÃ¡rios, participaÃ§Ã£o em cultura, esporte e lazer acessÃ­veis, e acesso Ã  justiÃ§a com recursos de acessibilidade. A lei tambÃ©m estabelece a prioridade na efetivaÃ§Ã£o de direitos Ã  vida, saÃºde, sexualidade, alimentaÃ§Ã£o, habitaÃ§Ã£o, educaÃ§Ã£o, trabalho, previdÃªncia, cultura, esporte, lazer, acessibilidade, mobilidade, moradia, convivÃªncia familiar e proteÃ§Ã£o contra negligÃªncia, discriminaÃ§Ã£o, exploraÃ§Ã£o, violÃªncia e opressÃ£o, visando promover inclusÃ£o, dignidade e autonomia."
                }
            ],
            "tecnologia assistiva": [
                {
                    "initial": "Tecnologia assistiva promove independÃªncia e inclusÃ£o. Tem interesse em algum tipo especÃ­fico como leitores de tela ou prÃ³teses?",
                    "followUp": "Leitores de tela como NVDA, JAWS e VoiceOver sÃ£o exemplos."
                }
            ],
            "libras": [
                {
                    "initial": "Libras Ã© a LÃ­ngua Brasileira de Sinais, essencial para a comunicaÃ§Ã£o de pessoas surdas no Brasil. VocÃª gostaria de saber mais sobre o aprendizado de Libras, recursos disponÃ­veis ou sua importÃ¢ncia?",
                    "followUp": "Existem diversos cursos online e presenciais para aprender Libras. AlÃ©m disso, aplicativos e dicionÃ¡rios online podem ser Ãºteis. Posso te indicar alguns recursos?"
                },
                {
                    "initial": "A acessibilidade em Libras Ã© um direito! Quer saber mais sobre a legislaÃ§Ã£o e a importÃ¢ncia da presenÃ§a de intÃ©rpretes?",
                    "followUp": "A Lei nÂº 10.436/2002 reconhece a Libras como meio legal de comunicaÃ§Ã£o e expressÃ£o. A presenÃ§a de intÃ©rpretes Ã© fundamental em diversos contextos."
                },
                {
                    "initial": "Quer saber mais sobre cursos online ou presenciais de Libras?",
                    "followUp": "Plataformas como a Kultivi e o Senac oferecem cursos de Libras. Universidades e associaÃ§Ãµes de surdos tambÃ©m costumam ter opÃ§Ãµes."
                },
                {
                    "initial": "Gostaria de conhecer aplicativos e dicionÃ¡rios online de Libras?",
                    "followUp": "Alguns aplicativos Ãºteis sÃ£o Hand Talk e SignAR. DicionÃ¡rios online como o da LIBRAS.com.br podem ser muito Ãºteis."
                },
                {
                    "initial": "Tem interesse em saber mais sobre a legislaÃ§Ã£o que garante a acessibilidade em Libras?",
                    "followUp": "A Lei nÂº 10.436/2002 e o Decreto nÂº 5.626/2005 sÃ£o importantes marcos legais que reconhecem e regulamentam a Libras."
                }
            ]
        };

        const palavrasChave = {
            "capacitaÃ§Ã£o": ["curso", "formaÃ§Ã£o", "aprender", "capacitaÃ§Ã£o", "mentoria"],
            "habilidades sociais": ["habilidades sociais", "comunicaÃ§Ã£o", "interaÃ§Ã£o", "rede de contatos", "trabalho em equipe"],
            "apoio emocional": ["emocional", "psicolÃ³gico", "apoio", "sentimento", "terapia"],
            "acessibilidade": ["acessÃ­vel", "cadeira de rodas", "braile", "rampa", "sinalizaÃ§Ã£o"],
            "empresas inclusivas": ["empresa", "colaborador", "inclusÃ£o", "diversidade", "ambiente inclusivo"],
            "direitos das pessoas com deficiÃªncia": ["direito", "lei", "inclusÃ£o", "estatuto", "garantia"],
            "tecnologia assistiva": ["tecnologia", "leitor de tela", "prÃ³tese", "comunicaÃ§Ã£o alternativa", "Ã³rtese"],
            "libras": ["libras", "lÃ­ngua de sinais", "surdos", "interpretaÃ§Ã£o", "comunicaÃ§Ã£o com surdos", "aprender libras", "curso de libras", "dicionÃ¡rio de libras", "acessibilidade em libras", "intÃ©rprete de libras", "legislaÃ§Ã£o libras"]
        };

        function getBotResponse(userInput, lastBotMessage) {
            // Lista de direitos especÃ­ficos
            const direitosEspecificos = ["saÃºde", "educaÃ§Ã£o", "trabalho", "transporte"];

            // Verifica se a Ãºltima mensagem do bot foi sobre direitos especÃ­ficos
            if (
                lastBotMessage &&
                lastBotMessage.includes("Quais direitos das pessoas com deficiÃªncia vocÃª gostaria de conhecer: saÃºde, educaÃ§Ã£o, trabalho, transporte ou outros?")
            ) {
                // Verifica se a resposta do usuÃ¡rio corresponde a um direito especÃ­fico
                for (const direito of direitosEspecificos) {
                    if (userInput.includes(direito)) {
                        return `O direito Ã  ${direito} estÃ¡ previsto na Lei Brasileira de InclusÃ£o (Lei nÂº 13.146/2015).`;
                    }
                }
                if (userInput.toLowerCase().includes("outros")) {
                    return `Outros direitos importantes incluem a acessibilidade, a igualdade de oportunidades, a participaÃ§Ã£o na vida polÃ­tica e pÃºblica, entre outros, todos assegurados pelo Estatuto da Pessoa com DeficiÃªncia.`;
                }
            }

            // Verifica se a Ãºltima mensagem do bot foi sobre exemplos de tecnologia assistiva
            if (
                lastBotMessage &&
                lastBotMessage.includes("Leitores de tela como NVDA, JAWS e VoiceOver sÃ£o exemplos.") &&
                userInput.toLowerCase().includes("sim")
            ) {
                return "Ã“timo! Para leitores de tela, vocÃª pode pesquisar por NVDA (gratuito), JAWS (pago) e VoiceOver (nativo em dispositivos Apple). Existem muitos tutoriais online para comeÃ§ar a usÃ¡-los.";
            }

            // Verifica se a Ãºltima mensagem do bot foi sobre ajudar com acessibilidade (primeira resposta)
            if (
                lastBotMessage &&
                lastBotMessage.includes("Posso te ajudar a verificar se um local ou produto Ã© acessÃ­vel?") &&
                userInput.toLowerCase().includes("sim")
            ) {
                return "Para avaliarmos a acessibilidade, me diga qual local ou produto gostaria de verificar!";
            }
            if (
                lastBotMessage &&
                lastBotMessage.includes("Posso te ajudar a verificar se um local ou produto Ã© acessÃ­vel?") &&
                userInput.toLowerCase().includes("me ajude")
            ) {
                return "Certo, diga qual local ou produto vocÃª quer verificar a acessibilidade.";
            }

            // Verifica se a Ãºltima mensagem do bot pediu um local/produto para verificar a acessibilidade
            if (
                lastBotMessage &&
                lastBotMessage.includes("Para avaliarmos a acessibilidade, me diga qual local ou produto gostaria de verificar!") &&
                userInput.trim() !== ""
            ) {
                const localProduto = userInput.toLowerCase();
                return `Para avaliar a acessibilidade de "${userInput}", observe o seguinte:\n\n` +
                       `**EdificaÃ§Ãµes AcessÃ­veis:**\n` +
                       `- Rampas e elevadores.\n` +
                       `- CorrimÃ£os e banheiros adaptados.\n` +
                       `- SinalizaÃ§Ã£o tÃ¡til e visual.\n` +
                       `- EspaÃ§os de circulaÃ§Ã£o adequados.\n\n` +
                       `**Vias PÃºblicas AcessÃ­veis:**\n` +
                       `- Piso tÃ¡til e faixas de pedestres seguras.\n` +
                       `- SemÃ¡foros sonoros e rebaixamento de guias.\n` +
                       `- MobiliÃ¡rio urbano acessÃ­vel.\n\n` +
                       `**Transporte PÃºblico AcessÃ­vel:**\n` +
                       `- Elevadores ou rampas de acesso em veÃ­culos.\n` +
                       `- EspaÃ§os reservados e sinalizaÃ§Ã£o adequada.\n` +
                       `- EstaÃ§Ãµes e terminais acessÃ­veis.\n\n` +
                       `**Lazer e RecreaÃ§Ã£o AcessÃ­veis:**\n` +
                       `- Caminhos acessÃ­veis em parques.\n` +
                       `- Brinquedos adaptados e Ã¡reas de descanso adequadas.\n` +
                       `- SanitÃ¡rios acessÃ­veis.\n\n` +
                       `**ComÃ©rcio e ServiÃ§os AcessÃ­veis:**\n` +
                       `- Acesso facilitado a lojas, restaurantes, cinemas, etc.\n\n` +
                       `**EducaÃ§Ã£o AcessÃ­vel:**\n` +
                       `- Acessibilidade fÃ­sica nas escolas e universidades.\n` +
                       `- Acessibilidade pedagÃ³gica (materiais e mÃ©todos adaptados).\n\n` +
                       `**SaÃºde AcessÃ­vel:**\n` +
                       `- Acesso facilitado a hospitais e clÃ­nicas.\n` +
                       `- Equipamentos e comunicaÃ§Ã£o acessÃ­veis.`;
            }
            if (
                lastBotMessage &&
                lastBotMessage.includes("Certo, diga qual local ou produto vocÃª quer verificar a acessibilidade.") &&
                userInput.trim() !== ""
            ) {
                return `VocÃª quer verificar a acessibilidade de "${userInput}". Ã‰ importante observar se hÃ¡ rampas, corrimÃ£os, elevadores, informaÃ§Ãµes em braile e outras adaptaÃ§Ãµes para garantir a inclusÃ£o.`;
            }

            // Resposta de confirmaÃ§Ã£o genÃ©rica
            if (userInput.toLowerCase().includes("sim") && lastBotMessage) {
                for (const key in database) {
                    for (const item of database[key]) {
                        if (item.initial && item.initial.toLowerCase() === lastBotMessage.toLowerCase()) {
                            // Verifica se a Ãºltima mensagem foi sobre apoio emocional
                            if (key === "apoio emocional") {
                                // Abre os sites recomendados em novas abas
                                window.open("https://www.psicologiaviva.com.br/", "_blank");
                                return "Abri para vocÃª o site recomendado para apoio emocional. Espero que seja Ãºtil!";
                            }
                            return item.followUp;
                        }
                    }
                }
            }

            // Tenta identificar tema por palavra-chave direta
            for (const key in database) {
                if (userInput.includes(key)) {
                    const respostas = database[key];
                    const respostaAleatoria = respostas[Math.floor(Math.random() * respostas.length)];
                    return respostaAleatoria.initial;
                }
            }

            // Verifica por palavras-chave flexÃ­veis
            for (const tema in palavrasChave) {
                const lista = palavrasChave[tema];
                if (lista.some(palavra => userInput.includes(palavra))) {
                    const respostas = database[tema];
                    const respostaAleatoria = respostas[Math.floor(Math.random() * respostas.length)];
                    return respostaAleatoria.initial;
                }
            }

            // Resposta de despedida para respostas como "Ok", "Obrigado" e similares
            if (
                userInput.includes("ok") ||
                userInput.includes("obrigado") ||
                userInput.includes("obrigada") ||
                userInput.includes("tchau") ||
                userInput.includes("obg")
            ) {
                return "Fico feliz em ter ajudado! Se precisar de mais alguma coisa, Ã© sÃ³ chamar. AtÃ© logo! ðŸ˜Š";
            }

            return "Desculpe, nÃ£o consegui identificar exatamente o que vocÃª perguntou. Por favor, seja mais especÃ­fico.";
        }

        function displayMessage(message, sender) {
            const chatBox = document.getElementById("chat-box");
            const messageDiv = document.createElement("div");
            messageDiv.classList.add(sender === "user" ? "user-message" : "bot-message");
            messageDiv.innerHTML = message.replace(/\n/g, '<br>'); // Usar innerHTML para renderizar <br>
            chatBox.appendChild(messageDiv);
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        function sendMessage() {
            const userInputElement = document.getElementById("user-input");
            const userInput = userInputElement.value;
            if (userInput.trim() === "") return;

            displayMessage(userInput, "user");
            userInputElement.value = "";

            const lastBotMessage = getLastBotMessage();
            const botResponse = getBotResponse(userInput.toLowerCase(), lastBotMessage);
            displayMessage(botResponse, "bot");
        }

        function getLastBotMessage() {
            const chatBox = document.getElementById("chat-box");
            const botMessages = chatBox.querySelectorAll(".bot-message");
            if (botMessages.length > 0) {
                return botMessages[botMessages.length - 1].textContent;
            }
            return "";
        }

        // Mensagem de boas-vindas
        window.onload = function() {
            const initialMessage = "OlÃ¡! Sou um assistente inclusivo. VocÃª pode me perguntar sobre: capacitaÃ§Ã£o, habilidades sociais, apoio emocional, acessibilidade, empresas inclusivas, direitos das pessoas com deficiÃªncia, tecnologia assistiva ou Libras.";
            displayMessage(initialMessage, "bot");
        };

        <body>

<button class="chat-button-open" id="open-chat">Abrir Chat</button>

<div class="chat-container hidden" id="chat-container">
    <div class="chat-header">
        <h3>Chatbot Inclusivo</h3>
        <button onclick="toggleChat()">Ã—</button>
    </div>
    <div class="chat-box" id="chat-box"></div>
    <div class="chat-input-area">
        <button id="start-speech" style="padding: 8px; cursor: pointer;">ðŸŽ¤</button>
        <input type="text" id="user-input" class="chat-input" placeholder="Digite sua mensagem..." onkeydown="if(event.key === 'Enter'){sendMessage();}">
        <button class="chat-submit-button" onclick="sendMessage()">Enviar</button>
    </div>
</div>

<script>
    const chatContainer = document.getElementById("chat-container");
    const openChatButton = document.getElementById("open-chat");
    const chatBox = document.getElementById("chat-box");
    const userInputElement = document.getElementById("user-input");
    const startSpeechButton = document.getElementById("start-speech");

    let lastBotMessage = "";

    const speechUtterance = new SpeechSynthesisUtterance();
    speechUtterance.lang = 'pt-BR';
    speechUtterance.rate = 1;
    speechUtterance.pitch = 1;

    function speak(message) {
        speechUtterance.text = message;
        window.speechSynthesis.speak(speechUtterance);
    }

    function displayBotMessage(message) {
        const messageDiv = document.createElement("div");
        messageDiv.classList.add("bot-message");
        messageDiv.innerHTML = message.replace(/\n/g, '<br>');
        chatBox.appendChild(messageDiv);
        chatBox.scrollTop = chatBox.scrollHeight;
        speak(message);
    }

    function displayUserMessage(message) {
        const messageDiv = document.createElement("div");
        messageDiv.classList.add("user-message");
        messageDiv.innerHTML = message.replace(/\n/g, '<br>');
        chatBox.appendChild(messageDiv);
        chatBox.scrollTop = chatBox.scrollHeight;
    }

    function toggleChat() {
        chatContainer.classList.toggle("hidden");
        openChatButton.style.display = chatContainer.classList.contains("hidden") ? "block" : "none";
        if (!chatContainer.classList.contains("hidden") && chatBox.children.length === 0) {
            const initialMessage = "OlÃ¡! Sou um assistente inclusivo. VocÃª pode me perguntar sobre: capacitaÃ§Ã£o, habilidades sociais, apoio emocional, acessibilidade, empresas inclusivas, direitos das pessoas com deficiÃªncia, tecnologia assistiva ou Libras.";
            displayBotMessage(initialMessage);
            lastBotMessage = initialMessage;
        }
    }

    openChatButton.addEventListener("click", toggleChat);

    function getBotResponse(userInput) {
        if (userInput.includes("acessibilidade")) {
            return "A acessibilidade digital garante que todos possam navegar em sites e apps. Precisa de dicas?";
        } else if (userInput.includes("direitos")) {
            return "Pessoas com deficiÃªncia tÃªm direito Ã  inclusÃ£o, acessibilidade e respeito, conforme a Lei Brasileira de InclusÃ£o.";
        } else if (userInput.includes("libras")) {
            return "Libras Ã© a LÃ­ngua Brasileira de Sinais. Ã‰ reconhecida oficialmente e usada por milhÃµes no Brasil.";
        } else {
            return "Desculpe, ainda estou aprendendo. Tente perguntar sobre acessibilidade, direitos, Libras, tecnologia assistiva, etc.";
        }
    }

    function sendMessage() {
        const userInput = userInputElement.value;
        if (userInput.trim() === "") return;

        displayUserMessage(userInput); // CORRIGIDO
        userInputElement.value = "";

        const botResponse = getBotResponse(userInput.toLowerCase());
        displayBotMessage(botResponse); // CORRIGIDO
        lastBotMessage = botResponse;
    }

    function getLastBotMessage() {
        const botMessages = chatBox.querySelectorAll(".bot-message");
        if (botMessages.length > 0) {
            return botMessages[botMessages.length - 1].textContent;
        }
        return "";
    }

    let recognition;
    const userInputField = document.getElementById("user-input");

    if ('webkitSpeechRecognition' in window) {
        recognition = new webkitSpeechRecognition();
        recognition.lang = 'pt-BR';
        recognition.continuous = false;
        recognition.interimResults = false;

        recognition.onstart = function() {
            startSpeechButton.textContent = "ðŸ”´";
        };

        recognition.onresult = function(event) {
            const transcript = event.results[0][0].transcript;
            userInputField.value = transcript;
            sendMessage();
            startSpeechButton.textContent = "ðŸŽ¤";
        };

        recognition.onerror = function(event) {
            console.error('Erro de reconhecimento de voz:', event.error);
            startSpeechButton.textContent = "ðŸŽ¤";
        };

        recognition.onend = function() {
            startSpeechButton.textContent = "ðŸŽ¤";
        };

        startSpeechButton.addEventListener('click', function() {
            recognition.start();
        });
    } else {
        startSpeechButton.style.display = 'none';
        alert("O reconhecimento de voz nÃ£o Ã© suportado neste navegador.");
    }

</script>

</body>